<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Homework Helper</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script defer src="{{ url_for('static', filename='app.js') }}"></script>
</head>
<body>
  <div class="app-shell">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <a class="brand-link" href="/">
        <img class="brand-avatar" src="{{ avatar_path }}" alt="avatar">
        <div class="brand-meta">
          <div class="brand-title-side">Homework Helper</div>
          <div class="brand-sub-side">by You</div>
        </div>
      </a>

      <nav class="side-tabs">
        <button class="side-tab active" data-tab="math">
          <img class="icon" src="{{ url_for('static', filename='images/math_solver.png') }}" alt="">
          <span>Math Solver</span>
        </button>
        <button class="side-tab" data-tab="flashcards">
          <img class="icon" src="{{ url_for('static', filename='images/flashcards.png') }}" alt="">
          <span>Flashcards</span>
        </button>
        <button class="side-tab" data-tab="planner">
          <img class="icon" src="{{ url_for('static', filename='images/planner.png') }}" alt="">
          <span>Planner</span>
        </button>
        <button class="side-tab" data-tab="stepbystep">
          <img class="icon" src="{{ url_for('static', filename='images/stepbystep.png') }}" alt="">
          <span>Step-by-Step</span>
        </button>
        <button class="side-tab" data-tab="history">
          <img class="icon" src="{{ url_for('static', filename='images/history.png') }}" alt="">
          <span>History</span>
        </button>
      </nav>

      <div class="sidebar-footer">
        <a class="link" href="/terms">Terms</a><span>·</span>
        <a class="link" href="/privacy">Privacy</a>
        <a class="logout" href="/logout">Logout</a>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <header class="topbar">
        <h1 class="app-title">Homework Helper</h1>
        <a class="user-chip" href="/settings">
          <img src="{{ avatar_path }}" alt="avatar">
          <div class="meta">
            <span class="name">{{ display_name }}</span>
            <span class="handle">@{{ username }}</span>
          </div>
        </a>
      </header>

      <div class="toolbar">
        <button id="download-pdf" class="btn btn-ghost">Download tab as PDF</button>
      </div>

      <!-- TAB: MATH -->
      <section id="tab-math" class="panel active">
        <div class="panel-head">
          <h2>Math Problem Solver</h2>
          <p class="sub">Type a problem or attach an image to solve (test mode).</p>
        </div>
        <div class="card">
          <textarea id="math-question" class="input textarea" placeholder="e.g., Solve 2x + 5 = 17"></textarea>
          <div class="row" style="margin-top:.6rem">
            <input id="math-image" type="file" accept="image/*">
            <button id="math-submit" class="btn btn-primary">Solve</button>
          </div>
        </div>
        <div id="math-answer" class="answer"></div>
      </section>

      <!-- TAB: FLASHCARDS -->
      <section id="tab-flashcards" class="panel">
        <div class="panel-head">
          <h2>Vocabulary Flashcards</h2>
          <p class="sub">Create quick word/definition cards.</p>
        </div>
        <div class="card">
          <div class="row">
            <input id="fc-front" class="input" placeholder="Front (word)">
            <input id="fc-back" class="input" placeholder="Back (definition)">
            <button id="add-flashcard" class="btn btn-primary">Add</button>
          </div>
        </div>
        <div id="flashcard-container" class="flashgrid"></div>
      </section>

      <!-- TAB: PLANNER -->
      <section id="tab-planner" class="panel">
        <div class="panel-head">
          <h2>Study Planner / Calendar</h2>
          <p class="sub">Add events and view them by month.</p>
        </div>

        <div class="card">
          <div class="row">
            <input id="event-title" class="input" placeholder="Event title">
            <input id="event-date" class="input" type="date">
            <button id="add-event" class="btn btn-primary">Add Event</button>
          </div>
        </div>

        <div class="calendar" style="margin-top:1rem">
          <div class="cal-toolbar">
            <button id="prev-month" class="btn btn-ghost">◀</button>
            <div class="cal-title" id="cal-title"></div>
            <button id="next-month" class="btn btn-ghost">▶</button>
          </div>
          <div class="cal-grid" id="cal-grid"></div>
        </div>
      </section>

      <!-- TAB: STEP BY STEP -->
      <section id="tab-stepbystep" class="panel">
        <div class="panel-head">
          <h2>Step-by-Step Explanation</h2>
          <p class="sub">Ask anything and get a structured explanation (test mode).</p>
        </div>
        <div class="card">
          <textarea id="step-question" class="input textarea" placeholder="Ask anything you want explained step-by-step"></textarea>
          <button id="step-submit" class="btn btn-primary" style="margin-top:.6rem">Get Steps</button>
        </div>
        <div id="step-answer" class="answer"></div>
      </section>

      <!-- TAB: HISTORY -->
      <section id="tab-history" class="panel">
        <div class="panel-head">
          <h2>Past Questions & Answers</h2>
        </div>
        <div id="history-container" class="history"></div>
      </section>
    </main>
  </div>
</body>
</html>
